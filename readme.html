<!-- File: readme.html
  Copyright (c) 2017-2022 Splunk Inc.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
either express or implied. See the License for the specific language governing permissions
and limitations under the License.
-->

<p>Below points are considered for providing the <b>URL Category</b> parameter value.
  <ul>
    <li>Entire URL category string has to be mentioned in block letters</li>
    <li>The most child category on UI has to be passed as the URL category parameter value to the action</li>
    <li>From the URL category value on UI, every space has to be replaced by an underscore '_' before passing it in the action's parameter value</li>
    <ul>
      <li>For example, <b>Alternate Lifestyle</b> on UI becomes <b>ALTERNATE_LIFESTYLE</b></li>
    </ul>
    <li>When you specify a <b>url_category</b>, you can give it either the name you created or the ID which is assigned to it from Zscaler.
   The search will first search for the name, as opposed to the ID. So if you create a category <b>phantom-block</b>, you could
   use either <b>phantom-block</b> or <b>CUSTOM_**</b>. The name for these is case sensitive.</li>
  </ul>
</p>

<p>The following are considered for providing the <b>URL</b> parameter value.
  <ul>
    <li>The comma-separated values of <b>URL</b> should correctly be given e.g. test.com,test1.com else the Phantom framework's parameter validator will return the error mentioning <b>Exception occurred: string index out of range</b>.</li>
  </ul>
</p>

<p>Configure and set up permissions for the <b>lookup_url</b> action</p>
      <p>
        <ul>
          <li>Login to Zscaler UI using the Administrator credentials.</li>
          <li>Once logged in, go to <b>Administration -> Role Management</b> section.</li>
          <li>Click on the <b>Edit</b> icon beside the role that your account uses to configure the test connectivity.</li>
          <li>Go to the <b>Functional Scope</b> section, enable <b>Security</b> if disabled, and save it.</li>
        </ul>
        The above steps would help run the Lookup URL action as expected.
      </p>

<p>The Sandbox Submission API requires a separate API key and uses a different host (csbapi.[zscaler-cloud-name]). For the <b>submit_file</b> action, the <b>sandbox_base_url</b> and <b>sandbox_api_token</b> asset configuration parameters should be configured. These two asset parameters, wont affect test_connectivity. Follow the below steps to fetch these credentials for the <b>submit_file</b> action</p>
  <p>
    <ul>
      <li>Log in to the ZIA Admin Portal using your <b>admin</b> credentials.</li>
      <li>Once logged in, go to <b>Administration -> Cloud Service API Key Management</b> section. In order to view the Cloud Service API Key Management page, the admin must be assigned an admin role.</li>
      <li>For the Cloud Sandbox Submission API used in this action, the base URL and token are displayed on the <b>Sandbox Submission API Token</b> tab.</li>
      <li>The base URL and token displayed here can be configured in the asset parameters in <b>sandbox_base_url</b> and <b>sandbox_api_token</b> parameters respectively and will be used for the submit_file action.</li>
    </ul>
    The above steps would help run the Submit File action as expected.
    <p><b>NOTE:</b> This action would work according to the API behavior</p>
  </p>

<p>Port Information</p>
<p>
    The app uses HTTP/ HTTPS protocol for communicating with the Zscaler server. Below are the default ports used by Splunk SOAR.
    <table>
        <tr class=plain>
            <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Service Name</th>
            <th>Transport Protocol</th>
            <th>Port</th>
        </tr>
        <tr>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http</td>
            <td>tcp</td>
            <td>80</td>
        </tr>
        <tr>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https</td>
            <td>tcp</td>
            <td>443</td>
        </tr>
    </table>
</p>
